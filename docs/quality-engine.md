# Answer Quality Engine (AQS)

ุณุณุชู ูุญุงุณุจู ุฎูุฏฺฉุงุฑ ฺฉูุช ูพุงุณุฎโูุง ุฏุฑ ุจุฎุด ูพุฑุณุด ู ูพุงุณุฎ ฺฉุงุฑุจุฑฺฏ.

## ููููู ฺฉู

AQS (Answer Quality Score) ฺฉ ุงูุชุงุฒ ุงุฒ 0 ุชุง 100 ุงุณุช ฺฉู ฺฉูุช ูุฑ ูพุงุณุฎ ุฑุง ุจุฑ ุงุณุงุณ ฺูุงุฑ ูุนุงุฑ ุงุตู ุงุฑุฒุงุจ ูโฺฉูุฏ:

1. **Content Score (40%)** - ฺฉูุช ูุญุชูุง ูพุงุณุฎ
2. **Engagement Score (25%)** - ุชุนุงูู ุณุคุงูโฺฉููุฏู ุจุง ูพุงุณุฎ
3. **Expert Score (20%)** - ุณุทุญ ุชุฎุตุต ููุณูุฏู
4. **Trust Score (15%)** - ุงุนุชุจุงุฑ ู ุฒูุงู ูพุงุณุฎ

## ูุฑููู ููุง

```
AQS = (Content ร 0.4 + Engagement ร 0.25 + Expert ร 0.2 + Trust ร 0.15) ร ExpertMultiplier
```

## ุฌุฒุฆุงุช ุงูุชุงุฒุฏู

### 1. Content Score (ูุญุชูุง)

| ูุนุงุฑ | ุงูุชุงุฒ |
|-------|--------|
| ุทูู ฺฉูุชุฑ ุงุฒ 150 ฺฉุงุฑุงฺฉุชุฑ | 0 |
| ุทูู 150-400 ฺฉุงุฑุงฺฉุชุฑ | 10 |
| ุทูู 400-1200 ฺฉุงุฑุงฺฉุชุฑ | 20 |
| ุทูู ุจุด ุงุฒ 1200 ฺฉุงุฑุงฺฉุชุฑ | 15 |
| ุฏุงุฑุง bullet points | +5 |
| ุฏุงุฑุง ูพุงุฑุงฺฏุฑุงูโุจูุฏ | +5 |
| ุฏุงุฑุง ูุซุงู | +10 |
| ุฏุงุฑุง ฺฏุงูโูุง ูุฑุญููโุง | +5 |
| ุฏุงุฑุง ฺฉููุงุช ฺฉูุฏ ุชุฎุตุต | +10 |
| ูพุงุณุฎ ุนููู ู ฺฉูุชุงู | -10 |

### 2. Engagement Score (ุชุนุงูู)

**ููู:** ููุท ูุงฺฉูุด ุณุคุงูโฺฉููุฏู ุฏุฑ ุงูุชุงุฒ ุญุณุงุจ ูโุดูุฏ.

| ูุนุงุฑ | ุงูุชุงุฒ |
|-------|--------|
| ุณุคุงูโฺฉููุฏู "ููุฏ ุจูุฏ" ุฒุฏ | +10 |
| ูพุงุณุฎ ุจู ุนููุงู ุจูุชุฑู ุงูุชุฎุงุจ ุดุฏ | +25 |
| ุณุคุงูโฺฉููุฏู ูพฺฏุฑ ฺฉุฑุฏ | +5 |

### 3. Expert Score (ุชุฎุตุต)

| ูุฏุฑุช ูพุฑููุงู | ุถุฑุจ |
|--------------|-------|
| ฺฉูุชุฑ ุงุฒ 40% | 0.8ร |
| 40-70% | 1.0ร |
| ุจุด ุงุฒ 70% | 1.2ร |

| ูุนุงุฑ | ุงูุชุงุฒ |
|-------|--------|
| ูุฑุฎ ูพุฐุฑุด ุจุงูุง 50% | +10 |
| ูุฑุฎ ูพุฐุฑุด 25-50% | +5 |
| ูุฑ ฺฏุฒุงุฑุด (flag) | -5 (ุญุฏุงฺฉุซุฑ -20) |

### 4. Trust Score (ุงุนุชุจุงุฑ)

| ุฒูุงู ูพุงุณุฎ | ุงูุชุงุฒ |
|-----------|--------|
| ฺฉูุชุฑ ุงุฒ 2 ุณุงุนุช | +10 |
| ฺฉูุชุฑ ุงุฒ 24 ุณุงุนุช | +5 |
| ุจุดุชุฑ | 0 |

| ูุนุงุฑ | ุงูุชุงุฒ |
|-------|--------|
| ูุฑุงุด ุจุด ุงุฒ 2 ุจุงุฑ | -5 |

## ุจุฑฺุณุจโูุง ฺฉูุช

| ุจุฑฺุณุจ | ูุญุฏูุฏู AQS | ุชูุถุญ |
|-------|-----------|-------|
| STAR โญ | 85-100 | ูพุงุณุฎ ููุชุฎุจ ุณุณุชู |
| PRO โจ | 70-84 | ูพุงุณุฎ ุญุฑููโุง |
| USEFUL ๐ | 40-69 | ูพุงุณุฎ ููุฏ |
| NORMAL | 0-39 | ูพุงุณุฎ ุนุงุฏ |

## API Routes

### ูุงฺฉูุด ุจู ูพุงุณุฎ
```
POST /api/qa/answers/[id]/reaction
Body: { type: "helpful" | "not_helpful" }
```

### ุงูุชุฎุงุจ ุจูุชุฑู ูพุงุณุฎ
```
POST /api/qa/questions/[id]/accept
Body: { answerId: "..." }
```

### ฺฏุฒุงุฑุด ูพุงุณุฎ
```
POST /api/qa/answers/[id]/flag
Body: { reason: "SPAM" | "ABUSE" | "MISLEADING" | "LOW_QUALITY" | "OTHER", note?: "..." }
```

### ุฏุฑุงูุช ูพุงุณุฎโูุง (ูุฑุชุจ ุดุฏู)
```
GET /api/qa/questions/[id]
```
ูพุงุณุฎโูุง ุจู ุชุฑุชุจ ุฒุฑ ูุฑุชุจ ูโุดููุฏ:
1. ูพุงุณุฎ ููุชุฎุจ (isAccepted) ุจุงูุง
2. AQS ูุฒูู
3. ุชุงุฑุฎ ุงุฌุงุฏ ูุฒูู

## Admin Debug

ุจุฑุง ุฏุจุงฺฏ ฺฉูุช ฺฉ ูพุงุณุฎ:
```
GET /api/admin/qa/answers/[id]/debug
```

ุจุฑุง ูุญุงุณุจู ูุฌุฏุฏ:
```
POST /api/admin/qa/answers/[id]/debug
```

ุตูุญู UI:
```
/admin/qa/answers/[id]
```

## Cron Job

ุจุฑุง ูุญุงุณุจู ูุฌุฏุฏ ูพุงุณุฎโูุง ูุฏู:
```
POST /api/cron/recompute-quality
Headers: { Authorization: "Bearer CRON_TOKEN" }
Query: ?maxAgeDays=7&limit=100
```

## ฺฉููุงุช ฺฉูุฏ ุชุฎุตุต

ุณุณุชู ุจุฑุง ูุฑ ุฏุณุชูโุจูุฏ ฺฉ ูุณุช ุงุฒ ฺฉููุงุช ฺฉูุฏ ุชุฎุตุต ุฏุงุฑุฏ:
- ุญุณุงุจุฏุงุฑ: ุซุจุชุ ุณูุฏุ ุฏูุชุฑุ ุชุฑุงุฒุ ุจุฏูฺฉุงุฑุ ุจุณุชุงูฺฉุงุฑ...
- ูุงูุงุช: ูุงูุงุชุ ุงุธูุงุฑูุงููุ ูุนุงูุชุ ููุฒุ ูุฆุช ุญู ุงุฎุชูุงู...
- ุจูู: ุจููโูุงููุ ุญู ุจููุ ุฎุณุงุฑุชุ ูุฑุงูุดุฒ...
- ู ุณุงุฑ ุฏุณุชูโูุง

## ูุงูโูุง ฺฉุฏ

```
src/lib/quality/
โโโ aqs.ts              # ูุญุงุณุจู AQS
โโโ signals.ts          # ุงุณุชุฎุฑุงุฌ ุณฺฏูุงูโูุง
โโโ domainKeywords.ts   # ฺฉููุงุช ฺฉูุฏ ุชุฎุตุต
โโโ index.ts            # Export

src/services/
โโโ answerQuality.service.ts  # ุณุฑูุณ ุงุตู

src/app/api/qa/
โโโ answers/[id]/
โ   โโโ reaction/route.ts
โ   โโโ flag/route.ts
โโโ questions/[id]/
    โโโ accept/route.ts

src/app/admin/qa/answers/[id]/
โโโ page.tsx            # ุตูุญู ุฏุจุงฺฏ
```

## ุณูุงุฑููุง ุชุณุช

1. **ูพุงุณุฎ ฺฉูุชุงู**: ฺฉูุชุฑ ุงุฒ 150 ฺฉุงุฑุงฺฉุชุฑ โ AQS ูพุงูุ NORMAL
2. **ูพุงุณุฎ ุจุง ุณุงุฎุชุงุฑ**: bullets + ูุซุงู โ ContentScore ุจุงูุง
3. **ูุงฺฉูุด ูุซุจุช ุณุคุงูโฺฉููุฏู**: โ Engagement ุจุงูุง
4. **ูพุงุณุฎ ููุชุฎุจ**: โ ุงฺฏุฑ AQS > 85ุ ุจุฑฺุณุจ STAR
5. **ฺฏุฒุงุฑุด ุฒุงุฏ**: โ ุงูุช Expert Score
6. **ููุณูุฏู ุจุง ูพุฑููุงู ูู**: โ ุถุฑุจ 1.2ร
