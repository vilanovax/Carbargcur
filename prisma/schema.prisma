generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model profiles {
  id                    String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id               String        @unique(map: "profiles_user_id_unique") @db.Uuid
  slug                  String        @unique(map: "profiles_slug_unique") @db.VarChar(255)
  full_name             String        @db.VarChar(255)
  city                  String?       @db.VarChar(100)
  experience_level      String?       @db.VarChar(50)
  job_status            String?       @db.VarChar(50)
  professional_summary  String?
  profile_photo_url     String?
  resume_url            String?
  resume_filename       String?       @db.VarChar(255)
  resume_uploaded_at    DateTime?     @db.Timestamp(6)
  is_public             Boolean       @default(true)
  is_active             Boolean       @default(true)
  completion_percentage Int           @default(0) @db.SmallInt
  onboarding_completed  Boolean       @default(false)
  created_at            DateTime      @default(now()) @db.Timestamp(6)
  updated_at            DateTime      @default(now()) @db.Timestamp(6)
  users                 users         @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "profiles_user_id_users_id_fk")
  user_skills           user_skills[]
}

model sessions {
  id            String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id       String   @db.Uuid
  token         String   @unique(map: "sessions_token_unique") @db.VarChar(500)
  expires_at    DateTime @db.Timestamp(6)
  created_at    DateTime @default(now()) @db.Timestamp(6)
  last_activity DateTime @default(now()) @db.Timestamp(6)
  users         users    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "sessions_user_id_users_id_fk")
}

model skills {
  id          String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name_fa     String        @unique(map: "skills_name_fa_unique") @db.VarChar(255)
  name_en     String?       @db.VarChar(255)
  category    String?       @db.VarChar(100)
  is_active   Boolean       @default(true)
  user_skills user_skills[]
}

model user_settings {
  id                  String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id             String   @unique(map: "user_settings_user_id_unique") @db.Uuid
  theme               String   @default("light") @db.VarChar(20)
  language            String   @default("fa") @db.VarChar(10)
  email_notifications Boolean  @default(true)
  created_at          DateTime @default(now()) @db.Timestamp(6)
  updated_at          DateTime @default(now()) @db.Timestamp(6)
  users               users    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "user_settings_user_id_users_id_fk")
}

model user_skills {
  id                  String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  profile_id          String   @db.Uuid
  skill_id            String   @db.Uuid
  proficiency_level   String?  @db.VarChar(50)
  years_of_experience Int?     @db.SmallInt
  profiles            profiles @relation(fields: [profile_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "user_skills_profile_id_profiles_id_fk")
  skills              skills   @relation(fields: [skill_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "user_skills_skill_id_skills_id_fk")
}

model users {
  id            String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  mobile        String         @unique(map: "users_mobile_unique") @db.VarChar(11)
  password_hash String         @db.VarChar(255)
  is_verified   Boolean?       @default(false)
  created_at    DateTime       @default(now()) @db.Timestamp(6)
  updated_at    DateTime       @default(now()) @db.Timestamp(6)
  last_login    DateTime?      @db.Timestamp(6)
  profiles      profiles?
  sessions      sessions[]
  user_settings user_settings?
}
